<!DOCTYPE html>
<html lang="ko">

<head>
  <title>페이지내이션 페이지번호 실습</title>
  <style>
    .CSS_클릭한페이지 {
      color: red;
    }
  </style>
  <script>
    const 과일바구니 = [
      { name: "사과", price: 1000 },
      { name: "바나나", price: 2000 },
      { name: "딸기", price: 5000 },
      { name: "포도", price: 3000 },
      { name: "참외", price: 1000 },
      { name: "복숭아", price: 2000 },
      { name: "수박", price: 3000 },
      { name: "자두", price: 3000 },
      { name: "멜론", price: 5000 },
      { name: "파인애플", price: 4000 },
      { name: "토마토", price: 4000 },
      { name: "망고", price: 2000 },
      { name: "매실", price: 1000 },
      { name: "모과", price: 3000 },
      { name: "작은사과", price: 500 },
      { name: "작은바나나", price: 1000 },
      { name: "작은딸기", price: 2500 },
      { name: "작은포도", price: 1500 },
      { name: "작은참외", price: 500 },
      { name: "작은복숭아", price: 1000 },
      { name: "작은수박", price: 1500 },
      { name: "작은자두", price: 1500 },
      { name: "작은멜론", price: 2500 },
      { name: "작은파인애플", price: 2000 },
      { name: "작은토마토", price: 2000 },
      { name: "작은망고", price: 1000 },
      { name: "작은매실", price: 500 },
      { name: "작은모과", price: 1500 },
      { name: "묶음사과", price: 5000 },
      { name: "묶음바나나", price: 10000 },
      { name: "묶음딸기", price: 25000 },
      { name: "묶음포도", price: 13000 },
      { name: "묶음참외", price: 5000 },
      { name: "묶음복숭아", price: 10000 },
      { name: "묶음수박", price: 15000 },
      { name: "묶음자두", price: 15000 },
      { name: "묶음멜론", price: 25000 },
      { name: "묶음파인애플", price: 20000 },
      { name: "묶음토마토", price: 20000 },
      { name: "묶음망고", price: 10000 },
      { name: "묶음매실", price: 5000 },
      { name: "묶음모과", price: 15000 },
      { name: "빨간상자사과", price: 50000 },
      { name: "빨간상자바나나", price: 100000 },
      { name: "빨간상자딸기", price: 250000 },
      { name: "빨간상자포도", price: 130000 },
      { name: "빨간상자참외", price: 50000 },
      { name: "빨간상자복숭아", price: 100000 },
      { name: "빨간상자수박", price: 150000 },
      { name: "빨간상자자두", price: 150000 },
      { name: "빨간상자멜론", price: 250000 },
      { name: "빨간상자파인애플", price: 200000 },
      { name: "빨간상자토마토", price: 200000 },
      { name: "빨간상자망고", price: 100000 },
      { name: "빨간상자매실", price: 50000 },
      { name: "빨간상자모과", price: 150000 },
      { name: "파란상자사과", price: 50000 },
      { name: "파란상자바나나", price: 100000 },
      { name: "파란상자딸기", price: 250000 },
      { name: "파란상자포도", price: 130000 },
      { name: "파란상자참외", price: 50000 },
      { name: "파란상자복숭아", price: 100000 },
      { name: "파란상자수박", price: 150000 },
      { name: "파란상자자두", price: 150000 },
      { name: "파란상자멜론", price: 250000 },
      { name: "파란상자파인애플", price: 200000 },
      { name: "파란상자토마토", price: 200000 },
      { name: "파란상자망고", price: 100000 },
      { name: "파란상자매실", price: 50000 },
      { name: "파란상자모과", price: 150000 },
      { name: "노란상자사과", price: 50000 },
      { name: "노란상자바나나", price: 100000 },
      { name: "노란상자딸기", price: 250000 },
      { name: "노란상자포도", price: 130000 },
      { name: "노란상자참외", price: 50000 },
      { name: "노란상자복숭아", price: 100000 },
      { name: "노란상자수박", price: 150000 },
      { name: "노란상자자두", price: 150000 },
      { name: "노란상자멜론", price: 250000 },
      { name: "노란상자파인애플", price: 200000 },
      { name: "노란상자토마토", price: 200000 },
      { name: "노란상자망고", price: 100000 },
      { name: "노란상자매실", price: 50000 },
      { name: "노란상자모과", price: 150000 },
      { name: "하얀상자사과", price: 50000 },
      { name: "하얀상자바나나", price: 100000 },
      { name: "하얀상자딸기", price: 250000 },
      { name: "하얀상자포도", price: 130000 },
      { name: "하얀상자참외", price: 50000 },
      { name: "하얀상자복숭아", price: 100000 },
      { name: "하얀상자수박", price: 150000 },
      { name: "하얀상자자두", price: 150000 },
      { name: "하얀상자멜론", price: 250000 },
      { name: "하얀상자파인애플", price: 200000 },
      { name: "하얀상자토마토", price: 200000 },
      { name: "하얀상자망고", price: 100000 },
      { name: "하얀상자매실", price: 50000 },
      { name: "하얀상자모과", price: 150000 },
      { name: "초록상자사과", price: 50000 },
      { name: "초록상자바나나", price: 100000 },
      { name: "초록상자딸기", price: 250000 },
      { name: "초록상자포도", price: 130000 },
      { name: "초록상자참외", price: 50000 },
      { name: "초록상자복숭아", price: 100000 },
      { name: "초록상자수박", price: 150000 },
      { name: "초록상자자두", price: 150000 },
      { name: "초록상자멜론", price: 250000 },
      { name: "초록상자파인애플", price: 200000 },
      { name: "초록상자토마토", price: 200000 },
      { name: "초록상자망고", price: 100000 },
      { name: "초록상자매실", price: 50000 },
      { name: "초록상자모과", price: 150000 },
    ]
    // 다음페이지, 이전페이지 눌렀을 때 이동해줄 페이지 담을 변수
    let 클릭한페이지 = 1
    let 시작페이지 = 1

    const 마지막페이지 = Math.ceil(과일바구니.length / 10)

    const JS_이전페이지이동기능 = () => {
      if (시작페이지 === 1) {
        alert("첫 페이지에요! 더 이상 내려갈 수 없어요!")

      } else {
        // 페이지 11이상일 때 이전페이지를 누르면 이전페이지를 10으로 설정해준다
        이전페이지 = 시작페이지 - 1

        시작페이지 = 시작페이지 - 10
        // 이전페이지를 넣어주면 10으로, 시작페이지를 넣어주면 1로 클릭됨
        클릭한페이지 = 이전페이지
        JS_페이지그리기기능()
        JS_과일목록그리기기능(클릭한페이지)
      }
    }

    const JS_다음페이지이동기능 = () => {
      if (시작페이지 + 10 <= 마지막페이지) {
        시작페이지 = 시작페이지 + 10
        클릭한페이지 = 시작페이지
        JS_페이지그리기기능()
        JS_과일목록그리기기능(클릭한페이지)
      } else {
        alert("마지막페이지 번호를 넘어갑니다. 더 이상 보여줄 수 없어요!")
      }
    }

    const JS_페이지그리기기능 = () => {
      const 상자 = new Array(10).fill("민서")
      console.log(상자)

      const 페이지들 = 상자.map((_, index) => {
        const 페이지번호 = index + 시작페이지

        // 삭제모달할 때 이거 참고하자!!!!!
        return 페이지번호 <= 마지막페이지 ? `
          <button 
            onclick="JS_과일목록그리기기능(${페이지번호}); 클릭한페이지=${페이지번호};JS_페이지그리기기능()"
            class=${클릭한페이지 === 페이지번호 ? "CSS_클릭한페이지" : ""}
          >
            ${페이지번호}
          </button>
        ` : ""
      }).join(" ")
      console.log(페이지들)

      document.getElementById("HTML_페이지보여주는곳").innerHTML = 페이지들
    }

    const JS_과일목록그리기기능 = (페이지번호담는통) => {

      const 결과 = 과일바구니.filter((el, index) => {
        const 보여줄갯수 = 10
        const 건너뛸갯수 = (페이지번호담는통 - 1) * 보여줄갯수

        // 6페이지일 때 60부터 69까지
        if (건너뛸갯수 <= index && index < 건너뛸갯수 + 보여줄갯수) {
          // 결과에 넣어줘
          return true
        } else {
          // 버려줘
          return false
        }
      })

      document.getElementById("HTML_과일진열하는곳").innerHTML = 결과.map(과일객체 =>
        `<div>${과일객체.name} ${과일객체.price}원</div>`
      ).join("")
    }

    window.onload = () => {
      JS_페이지그리기기능()
      JS_과일목록그리기기능(시작페이지)
    }
  </script>
</head>

<body>
  <!-- 과일목록 -->
  <div id="HTML_과일진열하는곳"></div>

  <!-- 페이지버튼 -->
  <button onclick="JS_이전페이지이동기능()">이전페이지</button>
  <span id="HTML_페이지보여주는곳"></span>
  <button onclick="JS_다음페이지이동기능()">다음페이지</button>
</body>

</html>